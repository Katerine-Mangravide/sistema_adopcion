{% extends "usuarios/base.html" %}
{% block title %}Editar Refugio - Admin{% endblock %}

{% block content %}
<div class="form-container">
    <div class="form-card">
        <h2>Editar Refugio</h2>
        <form method="post" action="{% url 'admin_panel:editar_refugio' refugio.usuario.id %}"> 
            {% csrf_token %}

            <h3 style="margin-top:20px; border-bottom: 1px solid #ccc; padding-bottom: 5px;">Datos de Acceso (Usuario Staff)</h3>

            <div class="form-group">
                <label>Usuario (Login)</label>
                {{ user_form.username }}
                {% if user_form.username.errors %}
                    <p class="error-message">{{ user_form.username.errors.0 }}</p>
                {% endif %}
            </div>

            <div class="form-group">
                <label>Nombre</label>
                {{ user_form.first_name }}
                {% if user_form.first_name.errors %}
                    <p class="error-message">{{ user_form.first_name.errors.0 }}</p>
                {% endif %}
            </div>

            <div class="form-group">
                <label>Apellido</label>
                {{ user_form.last_name }}
                {% if user_form.last_name.errors %}
                    <p class="error-message">{{ user_form.last_name.errors.0 }}</p>
                {% endif %}
            </div>
            
            <h3 style="margin-top:20px; border-bottom: 1px solid #ccc; padding-bottom: 5px;">Información del Refugio</h3>

            <div class="form-group">
                <label>Nombre del Refugio</label>
                {{ refugio_form.nombre }}
                {% if refugio_form.nombre.errors %}
                    <p class="error-message">{{ refugio_form.nombre.errors.0 }}</p>
                {% endif %}
            </div>

            <div class="form-group">
                <label>Dirección</label>
                {{ refugio_form.direccion }}
                {% if refugio_form.direccion.errors %}
                    <p class="error-message">{{ refugio_form.direccion.errors.0 }}</p>
                {% endif %}
            </div>

            <div class="form-group">
                <label>Teléfono</label>
                {{ refugio_form.telefono }}
                {% if refugio_form.telefono.errors %}
                    <p class="error-message">{{ refugio_form.telefono.errors.0 }}</p>
                {% endif %}
            </div>

            <div class="form-group">
    <label>Email (Login / Contacto)</label>
    {{ user_form.email }}
    {% if user_form.email.errors %}
        <p class="error-message">{{ user_form.email.errors.0 }}</p>
    {% endif %}
    
    {{ refugio_form.email.as_hidden }} 
</div>

            <div class="form-group" style="display:flex; gap:10px; margin-top: 30px;">
                <button type="submit" class="btn-primary">Actualizar</button>
                <a href="{% url 'admin_panel:gestion_refugios' %}" class="btn-secondary" style="text-align:center; display:inline-block;">Volver</a>
            </div>

        </form>
    </div>
</div>
{% endblock %}